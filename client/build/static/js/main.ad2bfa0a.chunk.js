(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){e.exports=a(217)},196:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(15),o=a.n(s),i=a(151),l=a(28),c=a(29),u=a(31),m=a(30),d=a(32),p=a(33),g=a(9),h=a(66),f=a(48),v=a(14),b=a.n(v),j=a(23),I=a(12),y=a(5),E=a(256),N=a(265),w=a(51),O=a.n(w),S=a(278),x=a(67),C=a(276),D=a(261),P=a(279),k=a(264),L=a(263),R=a(97),V=a(249),A=a(150),U=a(19),T=a(253),z=a(281);function F(e){var t=r.a.useState(e.selectedDate),a=Object(R.a)(t,2),s=a[0],o=a[1],i=e.handleDateChange;Object(n.useEffect)(function(){console.log(" Picker received props",e),i(s)},[s,i]);var l=function(e){o(e)};return r.a.createElement(U.a,{utils:A.a},r.a.createElement(V.a,{container:!0,justify:"space-around"},r.a.createElement(T.a,{margin:"normal",id:"date-picker-dialog",label:"Date of Discovery",format:"MM/dd/yyyy",value:s,onChange:l,KeyboardButtonProps:{"aria-label":"change date"},showTodayButton:!0,InputLabelProps:{shrink:!0}}),r.a.createElement(z.a,{margin:"normal",id:"time-picker",label:"Time of Discovery",value:s,onChange:l,KeyboardButtonProps:{"aria-label":"change time"},InputLabelProps:{shrink:!0}})))}var W=a(21),M=a.n(W),B={getUsers:function(e){return console.log("\n getUsers is querying for : ",e),M.a.get("/api/users",{params:{q:e}})},createUser:function(e){return M.a.post("/api/users",e)},findOneUser:function(e){return console.log("\n API findOneUser : ",e),M.a.get("/api/users",{params:{email:e}})},findUserById:function(e){return console.log("\n API findUserById w/ id: ",e),M.a.get("/api/users/"+e)},deleteUser:function(e){return console.log("\n deleteUser is attempting to delete : ".concat(e)),M.a.delete("/api/users/"+e)},getOrgs:function(e){return console.log("\n API getOrgs : ",e),M.a.get("/api/orgs",{params:{q:e}})},createOrganization:function(e){return console.log("API create org"),M.a.post("/api/orgs",e)},createProject:function(e){return console.log("API create project",e),M.a.post("/api/projects",e)},getProjects:function(e){return console.log("API get projects :",e),M.a.get("/api/projects",{params:{q:e}})},updateProject:function(e,t){return console.log("\n API updateProject w/ id: ",e),M.a.put("/api/projects/"+e,t)},createVersion:function(e){return console.log("API create version",e),M.a.post("/api/versions",e)},updateVersion:function(e,t){return console.log("\n API updateVersion w/ id: ",e),M.a.put("/api/versions/"+e,t)},getVersions:function(e){return console.log("\n API getVersions : ",e),M.a.get("/api/versions",{params:{q:e}})},findOneVersion:function(e){return console.log("\n API find one version : ",e),M.a.get("/api/versions",{params:{id:e}})},createIssue:function(e){return console.log("\n API create issue : ",e),M.a.post("/api/issues",e)},getIssues:function(e){return console.log("\n API getIssues : ".concat(e)),M.a.get("/api/issues",{params:{q:e}})},updateIssue:function(e,t){return console.log("\n API updateIssue w/ id: ",e),M.a.put("/api/issues/"+e,t)},createComment:function(e){return console.log("\n API create comment : ",e),M.a.post("/api/comments",e)},getComments:function(e){return console.log("\n API getComments : ".concat(e)),M.a.get("/api/comments",{params:{q:e}})},updateComment:function(e,t){return console.log("\n API updateComment w/ id: ",e),M.a.put("/api/comments/"+e,t)}},q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFieldChange=function(e){var t=e.target.id,n=e.target.value;a.setState(Object(g.a)({},t,n))},a.handleDateChange=function(e){console.log("received date:",e),a.setState(Object(I.a)({},a.state,{selectedDate:e}))},a.handleTimeChange=function(e){console.log("received time:",e),a.setState(Object(I.a)({},a.state,{selectedTime:e}))},a.handleOrgSelect=function(e){console.log("selected org target: ",e.target);var t=a.state.organizationNames.indexOf(e.target.value),n="",r="";n=""!==t?Object.keys(a.state.organizationList[t])[0]:"",r=""!==t?a.state.organizationNames[t]:"",console.log("selected org:",n),a.setState({orgId:n,orgName:r,projId:"",projName:"",projDescription:"",verId:"",verName:"",verDescription:""},function(){a.getAllProj()})},a.handleProjSelect=function(e){console.log("select proj target: ",e.target);var t=a.state.projectNames.indexOf(e.target.value),n=Object.keys(a.state.projectList[t])[0],r=a.state.projectNames[t],s=a.state.projectDesc[t];console.log("selected proj:",n),a.setState({projId:n,projName:r,projDescription:s,verId:"",verName:"",verDescription:""},function(){return a.getAllVers()})},a.handleVerSelect=function(e){console.log("select ver target: ",e.target);var t=a.state.versionNames.indexOf(e.target.value),n="",r="",s="";n=-1!==t?Object.keys(a.state.versionList[t])[0]:"",r=-1!==t?a.state.versionNames[t]:"",s=-1!==t?a.state.versionDesc[t]:"",-1!==t?console.log("selected vers:",n):console.log("Version index not found."),a.setState({verId:n,verName:r,verDescription:s})},a.clearState=function(){a.setState(Object(I.a)({},a.state,{orgId:"",projId:"",verId:"",comment:"",owner:"",status:"",resolved:"",priority:"",targetResolutionDate:"",potentialImpact:"",imageURL:"",partImpacted:"",selectedDate:new Date,organizationList:[],organizationNames:[],organizationDesc:[],projectList:[],projectNames:[],projectDesc:[],versionList:[],versionNames:[],versionDesc:[],disableProjSelect:!0,disableVerSelect:"true",issueSubject:"",issueDescription:"",issueType:"Technical",issueURL:"",issueComment:""}))},a.handleSubmit=Object(j.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.createIssue();case 2:return e.next=4,a.createComment();case 4:a.props.isSignedIn?a.props.showDashboard():a.props.history.push({pathname:"/",state:{isSignedIn:!1}});case 5:case"end":return e.stop()}},e)})),a.getAllOrgs=function(){B.getOrgs().then(function(e){console.log("API getOrgs returned: ",e.data);var t=e.data.map(function(e){return Object(g.a)({},e._id,e.name)}),n=e.data.map(function(e){return e.name});a.setState({organizationList:t,organizationNames:n})}).then(function(){return console.log("state after getAllOrg & getAllProj:",a.state)})},a.saveOrg=function(){B.createOrganization({name:a.state.orgName,description:a.state.orgDescription,url:a.state.orgUrl,member:[a.props.id]}).then(function(){return console.log("Org saved.")})},a.createProj=function(){console.log("creating new project"),B.createProject({name:a.state.projName,description:a.state.projDescription,organization:[a.state.orgId]}).then(function(e){return console.log("Project saved.",e)}).catch(function(e){return console.log(e)}).then(function(){return a.getAllProj()})},a.updateProject=function(){var e=Object(j.a)(b.a.mark(function e(t,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update proj w/ ".concat(t," and this data:"),a),e.next=3,B.updateProject(t,a).then(function(e){return console.log("updateProject returned data: ",e.data),e}).catch(function(e){return console.log("error occurred!",e)});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getAllProj=function(){B.getProjects({}).then(function(e){console.log("get all proj",e);var t=[],n=[],r=[],s=!0,o=!1,i=void 0;try{for(var l,c=e.data[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;u.organization===a.state.orgId&&(t.push(Object(g.a)({},u._id,u.name)),n.push(u.name),r.push(u.description))}}catch(m){o=!0,i=m}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}t.includes(void 0)?a.setState({projectList:[],projectNames:[],projectDesc:[],disableProjSelect:!0},console.log("No relevant project. ",t,n,r)):a.setState({projectList:t,projectNames:n,projectDesc:r,disableProjSelect:!1},console.log("Relevant projects found. Adding to state:",t,n,r))}).then(function(){return console.log("state after getAllProj, filtered :",a.state)}).then(a.getAllVers()).catch(function(e){return console.log(e)})},a.createVer=function(){B.createVersion({name:a.state.verName,description:a.state.verDescription,project:[a.state.projId]}).then(function(e){return console.log("Version saved.",e)}).catch(function(e){return console.log(e)})},a.updateVersion=function(){var e=Object(j.a)(b.a.mark(function e(t,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update version w/ ".concat(t," and this data:"),a),e.next=3,B.updateVersion(t,a).then(function(e){return console.log("updateVersion returned data: ",e.data),e}).catch(function(e){return console.log(e)});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getAllVers=function(){B.getVersions({}).then(function(e){console.log("get all vers",e);var t=[],n=[],r=[],s=!0,o=!1,i=void 0;try{for(var l,c=e.data[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;u.project===a.state.projId&&(t.push(Object(g.a)({},u._id,u.name)),n.push(u.name),r.push(u.description))}}catch(m){o=!0,i=m}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}t.includes(void 0)?a.setState({versionList:[],versionNames:[],versionDesc:[],disableVerSelect:!0},console.log("No relevant version. ",t,n,r)):a.setState({versionList:t,versionNames:n,versionDesc:r,disableVerSelect:!1},console.log("Relevant versions found. Adding to state:",t,n,r))})},a.getOneVer=function(){B.findOneVersion(a.state.verId).then(function(e){return console.log("get one ver",e)})},a.createIssue=function(){B.createIssue({reporter:a.props.userId,reporterName:a.props.name,type:a.state.issueType,timing:a.state.selectedDate,organization:a.state.orgId,project:a.state.projId,version:a.state.verId,subject:a.state.issueSubject,description:a.state.issueDescription,url:a.state.issueURL,imageURL:a.state.imageURL,status:a.state.status,resolved:a.state.resolved,owner:a.state.owner,priority:a.state.priority,targetResolutionDate:a.state.targetResolutionDate,potentialImpact:a.state.potentialImpact,partImpacted:a.state.partImpacted,organizationName:a.state.orgName,projectName:a.state.projName,versionName:a.state.verName,issueSubject:a.state.issueSubject}).then(function(e){a.setState(Object(I.a)({},a.state,{issueId:e.data._id}),console.log("createIssue has run.",e))})},a.createComment=function(){B.createComment({organization:a.state.orgId,project:a.state.projId,version:a.state.verId,issue:a.state.issueId,commenter:a.props.userId,actionDescription:["Reported issue"],comment:a.state.issueComment,visibility:"Organization members and reporter",avatar:a.props.photoURL,commenterName:a.props.name,organizationName:a.state.orgName,projectName:a.state.projName,versionName:a.state.verName,issueSubject:a.state.issueSubject}).then(function(e){console.log("createComment has run.",e)}).then(a.props.showDashboard)},a.state={userId:a.props.userId,userName:a.props.name,selectedDate:new Date,projId:"",projName:"",verId:"",verName:"",organizationList:[],organizationNames:[],organizationDesc:[],projectList:[],projectNames:[],projectDesc:[],versionList:[],versionNames:[],versionDesc:[],disableProjSelect:!0,disableVerSelect:"true",issueSubject:"",issueDescription:"",issueType:"Technical",issueURL:"",issueComment:"",issueId:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("component did mount :",this.state),this.getAllOrgs()}},{key:"componentDidUpdate",value:function(){console.log("component did update :",this.state)}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("form",{className:this.props.isSignedIn?t.container:t.nonAuthenticated,noValidate:!0,autoComplete:"off"},r.a.createElement("div",{className:t.grouping},r.a.createElement(x.a,{variant:"body2",className:t.textField},"Asterisk(*) denotes required fields.")),r.a.createElement("div",{className:t.grouping},!this.props.isSignedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{id:"name",label:"Your Name",placeholder:"John Doe",className:t.textField,defaultValue:this.props.name,margin:"normal",variant:"outlined"}),r.a.createElement(S.a,{id:"email",label:"Your Email",defaultValue:this.props.email,className:t.textField,margin:"normal",variant:"outlined"}))),r.a.createElement(L.a,{className:t.divider}),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-org",required:!0},"Provider"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-org",id:"demo-simple-select-outlined",key:Date.now,placeholder:"Provider Name",value:this.state.orgId,onChange:this.handleOrgSelect},this.state.organizationNames?this.state.organizationNames.map(function(t,a){return r.a.createElement(k.a,{id:Object.keys(e.state.organizationList[a])[0],key:t,name:t,value:t},t)}):function(){return console.log("state during MenuItem render",e.state)})),r.a.createElement(S.a,{id:"orgId",disabled:!0,className:t.textField,label:"Provider ID",value:this.state.orgId,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"filled",onChange:this.handleFieldChange.bind(this)})),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-proj",required:!0},"Project/Product"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-proj",id:"SI-demo-simple-select-outlined-proj",placeholder:"Project Name",onChange:this.handleProjSelect},this.state.projectNames?this.state.projectNames.map(function(t,a){return r.a.createElement(k.a,{id:t,key:Date.now+1e4*Math.random(),name:t,value:t,disabled:!!e.state.disableProjSelect},t,console.log("proj list at render:",e.state.projectList[a]))}):r.a.createElement("br",null))),r.a.createElement(S.a,{id:"projId",disabled:!0,label:"Project ID",className:t.textField,value:this.state.projId,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"filled",onChange:this.handleFieldChange.bind(this)})),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-ver",required:!0},"Version/Specification"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-ver",id:"demo-simple-select-outlined-ver",placeholder:"Version / Specification",onChange:this.handleVerSelect},this.state.versionNames?this.state.versionNames.map(function(t,a){return r.a.createElement(k.a,{id:t,key:Math.random(),name:t,value:t,disabled:!!e.state.disableVerSelect},t,console.log("ver list at render:",e.state.versionList[a]))}):r.a.createElement("br",null)),console.log("Disable project selection at render is:",this.state.disableProjSelect)),r.a.createElement(S.a,{id:"verId",disabled:!0,className:t.textField,label:"Version ID",value:this.state.verId,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},onChange:this.handleFieldChange.bind(this),variant:"filled"})),r.a.createElement(L.a,{className:t.divider}),r.a.createElement("div",{className:t.grouping},r.a.createElement(S.a,{id:"issueSubject",fullWidth:!0,label:"Subject",value:this.state.issueSubject,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this),style:{margin:8}}),r.a.createElement(S.a,{id:"issueDescription",required:!0,multiline:!0,fullWidth:!0,rows:"4",key:"outlined-multiline-static",label:"Issue Description",value:this.state.issueDescription,style:{margin:8},margin:"normal",onChange:this.handleFieldChange.bind(this),InputLabelProps:{shrink:!0},variant:"outlined"}),r.a.createElement(S.a,{id:"issueType",disabled:!0,label:"Issue Type",defaultValue:this.state.issueType,className:t.textField,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(F,{selectedDate:this.state.selectedDate,handleDateChange:this.handleDateChange}),r.a.createElement(S.a,{id:"issueURL",fullWidth:!0,label:"URL",value:this.state.issueURL,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this),style:{margin:8}}),r.a.createElement(S.a,{id:"issueComment",fullWidth:!0,multiline:!0,label:"Comment",placeholder:"Any thoughts?",value:this.state.issueComment,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this),style:{margin:8}}),r.a.createElement("div",{className:t.buttonGroup},r.a.createElement(E.a,{variant:"contained",color:"secondary",className:t.button,endIcon:r.a.createElement(O.a,null,"Reset Form"),onClick:function(){console.log("clicked reset while state is",e.state),e.clearState()}}," Reset Form"),r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.button,endIcon:r.a.createElement(N.a,null,"send"),onClick:this.handleSubmit}," Submit"))))}}]),t}(n.Component),G=Object(h.h)(Object(y.a)(function(e){return{container:Object(I.a)({display:"flex",flexWrap:"wrap",alignItems:"center",padding:e.spacing(0,10)},e.mixins.toolbar,{paddingTop:"10vh",width:"60vw"}),nonAuthenticated:Object(I.a)({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{paddingTop:"5vh",width:"50vw",margin:"auto"}),textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"40%"},content:{flexGrow:1,padding:e.spacing(3)},button:{margin:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:"55%"},selectEmpty:{marginTop:e.spacing(2)},divider:{margin:"20px 0 20px 0"},grouping:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%"},buttonGroup:{display:"flex",flexWrap:"wrap",justifyContent:"flex-end",marginTop:e.spacing(5),marginBottom:e.spacing(15),width:"inherit"}}},{withTheme:!0})(q)),_=a(266),H=a(267),Y=a(55),J=Object(Y.a)(function(e){return{cardsContent:Object(g.a)({padding:15,paddingTop:"12vh",display:"flex",justifyContent:"space-between",flexWrap:"wrap",width:"80vw"},e.breakpoints.only("xs"),{width:"100%",padding:0,paddingTop:60,paddingLeft:0}),card:Object(g.a)({width:"35vw",margin:15},e.breakpoints.only("xs"),{minWidth:275,width:"100%",margin:0,marginTop:7}),wideCard:Object(g.a)({width:"100vw",margin:15},e.breakpoints.only("xs"),{width:"100%",margin:0,marginTop:7}),mouseEntered:{color:"red"},mouseLeft:{color:"black"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},cardTitle:{marginBottom:16,fontSize:14},pos:{marginBottom:12}}});var K=function(e){var t=J(),a=[],n=[];return r.a.createElement(r.a.Fragment,null,e.commentObjects.map(function(e,t){var r=Date.parse(e.timestamps.created_at),s=new Date(r).toLocaleDateString(),o=new Date(r).toLocaleTimeString();a.push(s),n.push(o)}),r.a.createElement("div",{className:t.cardsContent},r.a.createElement(_.a,{className:t.card},r.a.createElement(H.a,null,r.a.createElement(x.a,{variant:"h5",component:"h2"},"User Summary"),r.a.createElement("br",null),r.a.createElement(x.a,{className:t.pos,color:"textSecondary"},"You are currently affiliated with:"),r.a.createElement("br",null),r.a.createElement(x.a,{variant:"h6"},e.orgCount," organizations ",r.a.createElement(x.a,{variant:"body1"},"and")," ",e.projCount," projects."))),r.a.createElement(_.a,{className:t.card},r.a.createElement(H.a,null,r.a.createElement(x.a,{variant:"h5",component:"h2"},"Issue Summary"),r.a.createElement("br",null),r.a.createElement(x.a,{color:"textSecondary"},"You currently have:"),r.a.createElement("br",null),r.a.createElement(x.a,{variant:"h6"},e.issueCount," issues from your connections."," "))),r.a.createElement(_.a,{className:t.wideCard},r.a.createElement(H.a,null,r.a.createElement(x.a,{variant:"h5",component:"h2"},"Notifications"),r.a.createElement("br",null),r.a.createElement("br",null),e.commentObjects.map(function(e,s){return r.a.createElement(r.a.Fragment,{key:Math.random()},r.a.createElement(L.a,null),r.a.createElement("br",null),r.a.createElement(x.a,{className:t.pos,color:"textSecondary"},"[ ",a[s],", ",n[s],' ] - Organization "',e.organizationName,'" / Project "',e.projectName,'" / Issue "',e.issueSubject,'"','":'),r.a.createElement(x.a,null,e.commenterName," ",e.actionDescription[0]),r.a.createElement(x.a,null,'"',e.comment,'"'),r.a.createElement("br",null))})))))},X=a(270),$=a(275),Q=a(96),Z=a.n(Q),ee=a(220),te=a(95),ae=a.n(te),ne=a(258),re=a(277),se=a(149),oe=a.n(se),ie=(a(196),a(40)),le=a.n(ie),ce=a(137),ue=a.n(ce),me=a(268),de=a(269);a(214).config(),le.a.initializeApp({apiKey:"AIzaSyCzm64_uz3vESpXIPdgcOeeSFouv-fT5Gw",authDomain:"project-issue-manager.firebaseapp.com"});var pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).checkNewUser=function(e){B.findOneUser(e||a.state.email).then(function(e){console.log("SigninPage is checking new user status.",e)}).catch(function(){return a.setState({message:"No results. Please try another query."})})},a.uiConfig={signInFlow:"popup",signInOptions:[le.a.auth.GoogleAuthProvider.PROVIDER_ID,le.a.auth.FacebookAuthProvider.PROVIDER_ID,le.a.auth.GithubAuthProvider.PROVIDER_ID,le.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},a.componentDidMount=function(){le.a.auth().onAuthStateChanged(function(e){a.setState({isSignedIn:!!e})})},a.componentDidUpdate=function(){le.a.auth().setPersistence(le.a.auth.Auth.Persistence.SESSION).then(function(){}).catch(function(e){console.log("\n error code : ".concat(e.code),"\n error message : ".concat(e.message))})},a.state={isSignedIn:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,null),r.a.createElement(de.a,{maxWidth:"sm",style:{backgroundColor:"#cfe8fc",height:"100vh",width:"100vw"}},r.a.createElement(x.a,{component:"div"},r.a.createElement("h3",null,"Please sign in to proceed."),r.a.createElement("h4",null,"(If you do not have an account, one will be created for you.)"),this.state.isSignedIn?r.a.createElement(h.a,{to:{pathname:"/developerview",state:{referrer:"/signinpage",wasAuthenticated:!0}}}):r.a.createElement(ue.a,{uiConfig:this.uiConfig,firebaseAuth:le.a.auth()}))))}}]),t}(n.Component),ge=a(3),he=a(34),fe=a(282),ve=a(262),be=a(139),je=a.n(be),Ie=a(142),ye=a.n(Ie),Ee=a(141),Ne=a.n(Ee),we=a(221),Oe=a(271),Se=a(272),xe=a(143),Ce=a.n(xe),De=a(144),Pe=a.n(De),ke=a(146),Le=a.n(ke),Re=a(147),Ve=a.n(Re),Ae=a(148),Ue=a.n(Ae),Te=a(145),ze=a.n(Te),Fe=Object(Y.a)(function(e){return{root:{display:"flex",flexGrow:1},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},appBarHeading:{flexGrow:1},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(g.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(I.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)}});var We=Object(h.h)(function(e){var t,a,n=Fe(),s=Object(he.a)(),o=r.a.useState(!1),i=Object(R.a)(o,2),l=i[0],c=i[1];return r.a.createElement("div",{className:n.root},r.a.createElement(me.a,null),r.a.createElement(X.a,{position:"fixed",className:Object(ge.a)(n.appBar,Object(g.a)({},n.appBarShift,l))},r.a.createElement(ne.a,null,r.a.createElement(ee.a,{color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)},edge:"start",className:Object(ge.a)(n.menuButton,Object(g.a)({},n.hide,l))},r.a.createElement(je.a,null)),r.a.createElement(x.a,{variant:"h6",className:n.appBarHeading,noWrap:!0},e.activeView),r.a.createElement(ne.a,{disableGutters:!0},r.a.createElement(x.a,{variant:"h6",className:n.title}),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(re.a,{id:"tooltip-icon1",title:"Sign out"},r.a.createElement(ee.a,{name:"signout","aria-label":"Sign In",color:"inherit",onClick:function(){le.a.auth().signOut(),e.history.push("/")},rel:"noopener"},r.a.createElement(ae.a,null))),r.a.createElement(re.a,{id:"tooltip-icon2",title:"GitHub repository"},r.a.createElement(ee.a,{name:"github","aria-label":"Open Github",color:"inherit",href:"https://github.com/danninemx/project-issue-manager",target:"_blank",rel:"noopener"},r.a.createElement(Z.a,null)))))),r.a.createElement(fe.a,{variant:"permanent",className:Object(ge.a)(n.drawer,(t={},Object(g.a)(t,n.drawerOpen,l),Object(g.a)(t,n.drawerClose,!l),t)),classes:{paper:Object(ge.a)((a={},Object(g.a)(a,n.drawerOpen,l),Object(g.a)(a,n.drawerClose,!l),a))},open:l},r.a.createElement("div",{className:n.toolbar},r.a.createElement(ee.a,{onClick:function(){c(!1)}},"rtl"===s.direction?r.a.createElement(Ne.a,null):r.a.createElement(ye.a,null))),r.a.createElement(L.a,null),r.a.createElement(ve.a,{"aria-label":"sidebar menu list"},r.a.createElement(we.a,{button:!0,key:"Dashboard",onClick:e.showDashboard},r.a.createElement(Oe.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(Se.a,{primary:"Dashboard"})),r.a.createElement(we.a,{button:!0,key:"Submit Issue",onClick:e.showSubmitIssue},r.a.createElement(Oe.a,null,r.a.createElement(Pe.a,null)),r.a.createElement(Se.a,{primary:"Submit Issue"})),r.a.createElement(we.a,{button:!0,key:"Reporter"===e.userType?"Track Issue":"Manage Issue",onClick:e.showManageIssue},r.a.createElement(Oe.a,null,r.a.createElement(ze.a,null)),r.a.createElement(Se.a,{primary:"Reporter"===e.userType?"Track Issue":"Manage Issue"})),r.a.createElement(L.a,null),r.a.createElement(we.a,{button:!0,key:"User Profile",onClick:e.showUserProfile},r.a.createElement(Oe.a,null,r.a.createElement(Le.a,null)),r.a.createElement(Se.a,{primary:"User Profile"})),"Reporter"!==e.userType&&r.a.createElement(r.a.Fragment,null,r.a.createElement(we.a,{button:!0,key:"Organization Profile",onClick:e.showOrganizationProfile},r.a.createElement(Oe.a,null,r.a.createElement(Ve.a,null)),r.a.createElement(Se.a,{primary:"Organization Profile"})),r.a.createElement(we.a,{button:!0,key:"Project Profile",onClick:e.showProjectProfile},r.a.createElement(Oe.a,null,r.a.createElement(Ue.a,null)),r.a.createElement(Se.a,{primary:"Project Profile"})))),r.a.createElement(L.a,null),r.a.createElement(L.a,null)),e.children)}),Me=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFieldChange=function(e){var t=e.target.id,n=e.target.value;a.setState(Object(g.a)({},t,n))},a.clearState=function(){a.setState(Object(I.a)({},a.state,{userType:"User",organization:"",project:"",subject:"",description:"",owner:"",comment:"",url:"",status:"",resolved:"",priority:"",targetResolutionDate:"",potentialImpact:"",image:"",partImpacted:""}))},a.getUser=function(){B.findOneUser(a.props.email).then(function(e){e.data?console.log("returned :",e.data[0]):console.log("no one!",e.data)}).catch(function(){return a.setState({message:"No results. Please try another query."})})},a.saveUser=function(){B.createUser({email:a.props.email,displayName:a.props.name,firstName:a.props.name.split(" ")[0],lastName:a.props.name.split(" ")[a.props.name.split(" ").length-1],photoURL:a.props.photoURL,userType:a.props.userType}).then(function(e){console.log("saveUser:",e),a.getUser()})},a.state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){console.log("component did update :",this.state)}},{key:"render",value:function(){var e=this;this.getUser();var t=this.props.classes;return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(x.a,{variant:"body2"},"Asterisk(*) denotes required fields."),r.a.createElement("div",{className:t.grouping},r.a.createElement("br",null),r.a.createElement(S.a,{id:"name",disabled:!0,label:"Your Name",placeholder:"John Doe",className:t.textField,defaultValue:this.props.name,margin:"normal",variant:"outlined"}),r.a.createElement(S.a,{id:"email",disabled:!0,label:"Your Email",defaultValue:this.props.email,className:t.textField,margin:"normal",variant:"outlined"})),r.a.createElement("div",{className:t.grouping},r.a.createElement(S.a,{id:"userType",required:!0,label:"User / Developer",defaultValue:this.props.userType,className:t.textField,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(S.a,{id:"photoURL",label:"Profile Photo (URL)",value:this.props.photoURL,style:{margin:8,width:"60vw"},margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:this.handleFieldChange.bind(this)})),r.a.createElement("div",{className:t.buttonGroup},r.a.createElement(E.a,{variant:"contained",color:"secondary",className:t.button,endIcon:r.a.createElement(O.a,null,"Reset Form"),onClick:function(){console.log("clicked reset while state is",e.state),e.clearState()}}," Reset Form"),r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.button,endIcon:r.a.createElement(N.a,null,"send"),onClick:function(){e.saveUser(),e.props.showDashboard()}}," Submit")))}}]),t}(n.Component),Be=Object(h.h)(Object(y.a)(function(e){return{container:Object(I.a)({display:"flex",flexWrap:"wrap",alignItems:"center",padding:e.spacing(0,10)},e.mixins.toolbar,{paddingTop:"12vh",width:"60vw"}),textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"48%"},content:{flexGrow:1,padding:e.spacing(3)},wrapper:{position:"relative"},button:{margin:e.spacing(1)},grouping:{display:"flex",flexWrap:"wrap",width:"100%"},buttonGroup:{display:"flex",flexWrap:"wrap",justifyContent:"flex-end",marginTop:e.spacing(5),marginBottom:e.spacing(15),width:"inherit"}}},{withTheme:!0})(Me)),qe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFieldChange=function(e){var t=e.target.id,n=e.target.value;a.setState(Object(I.a)({},a.state,Object(g.a)({},t,n)))},a.clearState=function(){a.setState(Object(I.a)({},a.state,{orgName:"",orgDescription:"",orgUrl:"",email:"",member:[a.props.id]}))},a.getAllOrgs=function(){},a.getOneOrg=function(){},a.saveOrg=function(){B.createOrganization({name:a.state.orgName,description:a.state.orgDescription,url:a.state.orgUrl,email:a.state.email,member:[a.props.id]}).then(function(e){console.log("Org saved.",e),a.props.showDashboard()})},a.state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){console.log("component did update :",this.state)}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(x.a,{variant:"body2",style:{marginBottom:8}},"Asterisk(*) denotes required fields."),r.a.createElement("div",{className:t.grouping},r.a.createElement("br",null),r.a.createElement(S.a,{id:"orgName",required:!0,label:"Provider Name",value:this.state.orgName,className:t.textField,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this),style:{margin:8},InputLabelProps:{shrink:!0}}),r.a.createElement(S.a,{id:"email",label:"Email",value:this.state.email,className:t.textField,style:{margin:8},placeholder:"info@company.com",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(S.a,{id:"orgDescription",label:"Description",value:this.state.orgDescription,style:{margin:8,width:"100%"},margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(S.a,{id:"orgUrl",label:"URL",value:this.state.orgUrl,style:{margin:8,width:"100%"},margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:this.handleFieldChange.bind(this)})),r.a.createElement("div",{className:t.buttonGroup},r.a.createElement(E.a,{variant:"contained",color:"secondary",className:t.button,endIcon:r.a.createElement(O.a,null,"Reset Form"),onClick:function(){console.log("clicked reset while state is",e.state),e.clearState()}}," Reset Form"),r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.button,endIcon:r.a.createElement(N.a,null,"send"),onClick:this.saveOrg}," Submit")))}}]),t}(n.Component),Ge=Object(h.h)(Object(y.a)(function(e){return{container:Object(I.a)({display:"flex",flexWrap:"wrap",alignItems:"center",padding:e.spacing(0,10)},e.mixins.toolbar,{paddingTop:"12vh",width:"60vw"}),textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"48%"},content:{flexGrow:1,padding:e.spacing(3)},wrapper:{position:"relative"},button:{margin:e.spacing(1)},grouping:{display:"flex",flexWrap:"wrap",width:"100%"},buttonGroup:{display:"flex",flexWrap:"wrap",justifyContent:"flex-end",marginTop:e.spacing(5),marginBottom:e.spacing(15),width:"inherit"}}},{withTheme:!0})(qe)),_e=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFieldChange=function(e){var t=e.target.id,n=e.target.value;a.setState(Object(g.a)({},t,n))},a.handleOrgSelect=function(e){console.log("selected org target: ",e.target);var t=a.state.organizationNames.indexOf(e.target.value),n="";n=""!==t?Object.keys(a.state.organizationList[t])[0]:"",console.log("selected org:",n),a.setState({orgId:n,projId:"",projName:"",projDescription:"",verId:"",verName:"",verDescription:""},function(){a.getAllProj()})},a.handleProjSelect=function(e){console.log("select proj target: ",e.target);var t=a.state.projectNames.indexOf(e.target.value),n=Object.keys(a.state.projectList[t])[0],r=a.state.projectNames[t],s=a.state.projectDesc[t];console.log("selected proj:",n),a.setState({projId:n,projName:r,projDescription:s,verId:"",verName:"",verDescription:""},function(){return a.getAllVers()})},a.handleVerSelect=function(e){console.log("select ver target: ",e.target);var t=a.state.versionNames.indexOf(e.target.value),n="",r="",s="";n=-1!==t?Object.keys(a.state.versionList[t])[0]:"",r=-1!==t?a.state.versionNames[t]:"",s=-1!==t?a.state.versionDesc[t]:"",-1!==t?console.log("selected vers:",n):console.log("Version index not found."),a.setState({verId:n,verName:r,verDescription:s})},a.clearState=function(){a.setState(Object(I.a)({},a.state,{projId:"",projName:"",projDescription:"",verId:"",verName:"",verDescription:"",organizationList:[],organizationNames:[],organizationDesc:[],projectList:[],projectNames:[],projectDesc:[],versionList:[],versionNames:[],versionDesc:[],disableProjSelect:"true",disableVerSelect:"true"}),function(){a.getAllOrgs(),console.log("state cleared")})},a.handleFormSubmit=function(e){""===a.state.orgId?console.log("choose org first. Visit org profile for creation"):Object(j.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===a.state.projId){e.next=5;break}return e.next=3,a.updateProject(a.state.projId,{name:a.state.projName,description:a.state.projDescription,organization:a.state.orgId});case 3:e.next=6;break;case 5:Object(j.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.createProj();case 2:case"end":return e.stop()}},e)}))();case 6:case"end":return e.stop()}},e)}))().then(""===a.state.verId?a.createVer():a.updateVersion(a.state.verId,{name:a.state.verName,description:a.state.verDescription,project:a.state.projId})).then(function(){return a.props.showDashboard()}).catch(function(e){return console.log(e)})},a.getAllOrgs=function(){B.getOrgs().then(function(e){console.log("API getOrgs returned: ",e.data);var t=e.data.map(function(e){return Object(g.a)({},e._id,e.name)}),n=e.data.map(function(e){return e.name});a.setState({organizationList:t,organizationNames:n})}).then(function(){return console.log("state after getAllOrg & getAllProj:",a.state)})},a.saveOrg=function(){B.createOrganization({name:a.state.orgName,description:a.state.orgDescription,url:a.state.orgUrl,member:[a.props.id]}).then(function(){return console.log("Org saved.")})},a.createProj=function(){console.log("creating new project"),B.createProject({name:a.state.projName,description:a.state.projDescription,organization:[a.state.orgId]}).then(function(e){return console.log("Project saved.",e)}).catch(function(e){return console.log(e)}).then(function(){return a.getAllProj()})},a.updateProject=function(){var e=Object(j.a)(b.a.mark(function e(t,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update proj w/ ".concat(t," and this data:"),a),e.next=3,B.updateProject(t,a).then(function(e){return console.log("updateProject returned data: ",e.data),e}).catch(function(e){return console.log("error occurred!",e)});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getAllProj=function(){B.getProjects({}).then(function(e){console.log("get all proj",e);var t=[],n=[],r=[],s=!0,o=!1,i=void 0;try{for(var l,c=e.data[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;u.organization===a.state.orgId&&(t.push(Object(g.a)({},u._id,u.name)),n.push(u.name),r.push(u.description))}}catch(m){o=!0,i=m}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}t.includes(void 0)?a.setState({projectList:[],projectNames:[],projectDesc:[],disableProjSelect:!0},console.log("No relevant project. ",t,n,r)):a.setState({projectList:t,projectNames:n,projectDesc:r,disableProjSelect:!1},console.log("Relevant projects found. Adding to state:",t,n,r))}).then(function(){return console.log("state after getAllProj, filtered :",a.state)}).then(a.getAllVers()).catch(function(e){return console.log(e)})},a.createVer=function(){B.createVersion({name:a.state.verName,description:a.state.verDescription,project:a.state.projId}).then(function(e){return console.log("Version saved.",e)}).catch(function(e){return console.log(e)})},a.updateVersion=function(){var e=Object(j.a)(b.a.mark(function e(t,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update version w/ ".concat(t," and this data:"),a),e.next=3,B.updateVersion(t,a).then(function(e){return console.log("updateVersion returned data: ",e.data),e}).catch(function(e){return console.log(e)});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getAllVers=function(){B.getVersions({}).then(function(e){console.log("get all vers",e);var t=[],n=[],r=[],s=!0,o=!1,i=void 0;try{for(var l,c=e.data[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;u.project===a.state.projId&&(t.push(Object(g.a)({},u._id,u.name)),n.push(u.name),r.push(u.description))}}catch(m){o=!0,i=m}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}t.includes(void 0)?a.setState({versionList:[],versionNames:[],versionDesc:[],disableVerSelect:!0},console.log("No relevant version. ",t,n,r)):a.setState({versionList:t,versionNames:n,versionDesc:r,disableVerSelect:!1},console.log("Relevant versions found. Adding to state:",t,n,r))})},a.getOneVer=function(){B.findOneVersion(a.state.verId).then(function(e){return console.log("get one ver",e)})},a.state={projId:"",projName:"",projDescription:"",verId:"",verName:"",verDescription:"",organizationList:[],organizationNames:[],organizationDesc:[],projectList:[],projectNames:[],projectDesc:[],versionList:[],versionNames:[],versionDesc:[],disableProjSelect:!0,disableVerSelect:"true"},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAllOrgs()}},{key:"componentDidUpdate",value:function(){console.log("component did update :",this.state)}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(x.a,{variant:"body2"},"Asterisk(*) denotes required fields."),r.a.createElement("br",null),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-org"},"Provider"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-org",id:"demo-simple-select-outlined",key:Date.now,placeholder:"Provider Name",value:""!==this.state.orgId?this.state.orgId:"",onChange:this.handleOrgSelect},this.state.organizationNames?this.state.organizationNames.map(function(t,a){return r.a.createElement(k.a,{id:Object.keys(e.state.organizationList[a])[0],key:t,name:t,value:t},t)}):function(){return console.log("state during MenuItem render",e.state)})),r.a.createElement(S.a,{id:"orgId",disabled:!0,className:t.textField,label:"Provider ID",value:this.state.orgId,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"filled",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(L.a,{className:t.divider})),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-proj"},"Select Project"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-proj",id:"demo-simple-select-outlined-proj",key:Date.now,placeholder:"Project Name",onChange:this.handleProjSelect},this.state.projectNames?this.state.projectNames.map(function(t,a){return r.a.createElement(k.a,{id:t,key:Date.now,name:t,value:t,disabled:!!e.state.disableProjSelect},t,console.log("proj list at render:",e.state.projectList[a]))}):r.a.createElement("br",null))),r.a.createElement(S.a,{id:"projId",disabled:!0,label:"Project ID",className:t.textField,value:this.state.projId,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"filled",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(S.a,{id:"projName",required:!0,fullWidth:!0,disabled:""===this.state.orgId,label:"Project/Product Name",value:this.state.projName,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this),style:{margin:8},InputLabelProps:{shrink:!0}}),r.a.createElement(S.a,{id:"projDescription",fullWidth:!0,disabled:""===this.state.orgId,label:"Description",value:this.state.projDescription,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(L.a,{className:t.divider})),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-ver"},"Select Version"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-ver",id:"demo-simple-select-outlined-ver",placeholder:"Version / Specification",onChange:this.handleVerSelect},this.state.versionNames?this.state.versionNames.map(function(t,a){return r.a.createElement(k.a,{id:t,key:t,name:t,value:t,disabled:!!e.state.disableVerSelect},t,console.log("ver list at render:",e.state.versionList[a]))}):r.a.createElement("br",null)),console.log("Disable project selection at render is:",this.state.disableProjSelect)),r.a.createElement(S.a,{id:"verId",disabled:!0,className:t.textField,label:"Version ID",value:this.state.verId,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"filled",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(S.a,{id:"verName",required:!0,fullWidth:!0,label:"Version / Specification Name",value:this.state.verName,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this),style:{margin:8},InputLabelProps:{shrink:!0}}),r.a.createElement(S.a,{id:"verDescription",fullWidth:!0,label:"Description",value:this.state.verDescription,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:this.handleFieldChange.bind(this)})),r.a.createElement("div",{className:t.buttonGroup},r.a.createElement(E.a,{variant:"contained",color:"secondary",className:t.button,endIcon:r.a.createElement(O.a,null,"Reset Form"),onClick:function(){console.log("form reset while state is:",e.state),e.clearState()}}," Reset Form"),r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.button,endIcon:r.a.createElement(N.a,null,"send"),onClick:this.handleFormSubmit}," Submit")))}}]),t}(n.Component),He=Object(h.h)(Object(y.a)(function(e){return{container:Object(I.a)({display:"flex",flexWrap:"wrap",alignItems:"center",padding:e.spacing(0,10)},e.mixins.toolbar,{paddingTop:"12vh",width:"60vw"}),textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"40%"},content:{flexGrow:1,padding:e.spacing(3)},wrapper:{position:"relative"},button:{margin:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:"55%"},selectEmpty:{marginTop:e.spacing(2)},divider:{margin:"20px 0 20px 0",width:"100%"},grouping:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%"},buttonGroup:{display:"flex",flexWrap:"wrap",justifyContent:"flex-end",marginTop:e.spacing(5),marginBottom:e.spacing(15),width:"inherit"}}},{withTheme:!0})(_e)),Ye=a(273),Je=a(274),Ke=Object(Y.a)(function(e){return{card:{maxWidth:500,minWidth:"100%",marginTop:e.spacing(1)},divider:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},avatarRoot:{display:"flex","& > *":{margin:e.spacing(1)},alignItems:"center",justifyContent:"space-between"},avatarBlock:{display:"flex",alignItems:"center"},avatar:{display:"inline-block",marginRight:e.spacing(2)},bigAvatar:{width:60,height:60},target:{fontWeight:"bold",color:"red"}}});function Xe(e){var t=Ke();return r.a.createElement(_.a,{className:t.card},r.a.createElement(Ye.a,null,r.a.createElement(H.a,null,r.a.createElement("div",{className:t.avatarRoot},r.a.createElement("div",{className:t.avatarBlock},r.a.createElement(Je.a,{alt:e.displayName,src:e.photoURL,className:t.avatar},e.displayName),r.a.createElement(x.a,{gutterBottom:!0,variant:"h6",component:"h2",display:"inline"},e.displayName)),r.a.createElement("div",null,r.a.createElement(x.a,null,e.createdAt))),r.a.createElement(x.a,{display:"inline",variant:"subtitle1",color:"textSecondary",component:"p"},e.actionDesc),r.a.createElement(L.a,{className:t.divider}),r.a.createElement(x.a,{variant:"body2",color:"textSecondary",component:"p"},e.comment))))}var $e=a(108),Qe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFieldChange=function(e){var t=e.target.id,n=e.target.value;a.setState(Object(g.a)({},t,n))},a.handleDateChange=function(e){console.log("handleDateChange got date:",e),a.setState(Object(I.a)({},a.state,{selectedDate:e}))},a.handleOrgSelect=function(e){console.log("selected org target: ",e.target);var t=a.state.organizationNames.indexOf(e.target.value),n="",r="";n=""!==t?Object.keys(a.state.organizationList[t])[0]:"",r=""!==t?a.state.organizationNames[t]:"",console.log("selected org:",n),a.setState(Object(I.a)({},a.state,{orgId:n,orgName:r,projId:"",projName:"",projDescription:"",verId:"",verName:"",verDescription:"",reporter:"",owner:"",resolved:"",priority:"",targetResolutionDate:"",type:"Technical",status:"",subject:"",description:"",potentialImpact:"",timing:"",url:"",imageURL:"",comments:[],issue:"",commenter:"",actionDesc:[],visibility:"",comment:""}),function(){a.getAllProj()})},a.handleProjSelect=function(e){console.log("select proj target: ",e.target);var t=a.state.projectNames.indexOf(e.target.value),n=Object.keys(a.state.projectList[t])[0],r=a.state.projectNames[t],s=a.state.projectDesc[t];console.log("selected proj:",n),a.setState(Object(I.a)({},a.state,{projId:n,projName:r,projDescription:s,verId:"",verName:"",verDescription:""}),function(){return a.getAllVers()})},a.handleVerSelect=function(e){console.log("select ver target: ",e.target);var t=a.state.versionNames.indexOf(e.target.value),n="",r="",s="";n=-1!==t?Object.keys(a.state.versionList[t])[0]:"",r=-1!==t?a.state.versionNames[t]:"",s=-1!==t?a.state.versionDesc[t]:"",-1!==t?console.log("selected vers:",n):console.log("Version index not found."),a.setState(Object(I.a)({},a.state,{verId:n,verName:r,verDescription:s}),function(){return a.getAllIssues()})},a.handleIssueSelect=function(e){console.log("select issue event.target: ",e.target);var t=a.state.issueNames.indexOf(e.target.value),n="",r="",s="",o="",i="",l="",c="",u="",m="",d=!1,p="",g="",h="",f="",v="",b="";n=-1!==t?Object.keys(a.state.issueList[t])[0]:"",-1!==t?console.log("selected issue Id:",n):console.log("Issue index not found."),u=-1!==t?a.state.issueReporters[t]:"",m=-1!==t?a.state.issueOwners[t]:"",d=-1!==t?a.state.issueResolved[t]:"",p=-1!==t?a.state.issuePriorities[t]:"",g=-1!==t?a.state.issueTargetRes[t]:"",h=-1!==t?a.state.issueTypes[t]:"",f=-1!==t?a.state.issueStatus[t]:"",r=-1!==t?a.state.issueNames[t]:"",s=-1!==t?a.state.issueDesc[t]:"",o=-1!==t?a.state.issueDates[t]:"",i=-1!==t?a.state.issueURLs[t]:"",l=-1!==t?a.state.issueImageURLs[t]:"",c=-1!==t?a.state.issueCommentIds[t]:"",v=-1!==t?a.state.issueImpacts[t]:"",b=-1!==t?a.state.issueReporterNames[t]:"",a.setState(Object(I.a)({},a.state,{issue:n,subject:r,description:s,selectedDate:o,url:i,imageURL:l,comments:c,reporter:u,owner:m,resolved:d,priority:p,targetResolutionDate:g,type:h,status:f,potentialImpact:v,reporterName:b}),function(){return a.getAllComments()})},a.clearState=function(){a.setState(Object(I.a)({},a.state,{projId:"",projName:"",verId:"",verName:"",projectList:[],projectNames:[],projectDesc:[],versionList:[],versionNames:[],versionDesc:[],issueList:[],issueNames:[],issueDesc:[],issueObjectList:[],disableProjSelect:!0,disableVerSelect:!0,disableIssueSelect:!0,issuePreState:{},issueAspects:["reporter","owner","resolved","priority","targetResolutionDate","type","status","subject","description","potentialImpact","timing","url","imageURL","comments"],reporter:"",owner:"",resolved:"",priority:"",targetResolutionDate:"",type:"Technical",status:"",subject:"",description:"",potentialImpact:"",timing:"",url:"",imageURL:"",comment:[],issue:"",commenter:"",actionDesc:[],visibility:"",image:"",createdAt:"",updatedAt:"",commentOrgIds:[],commentProjIds:[],commentVerIds:[],commentIssueIds:[],commentCommenterIds:[],commentActionsDescriptions:[],commentTexts:[],commentVisibilities:[],commentPhotoURLs:[],commentTimestamps:[],commentFullObjects:[],commentAuthors:[]}))},a.getAllOrgs=function(){B.getOrgs().then(function(e){var t=e.data.map(function(e){return Object(g.a)({},e._id,e.name)}),n=e.data.map(function(e){return e.name});a.setState({organizationList:t,organizationNames:n})})},a.saveOrg=function(){B.createOrganization({name:a.state.orgName,description:a.state.orgDescription,url:a.state.orgUrl,member:[a.props.id]}).then(function(){return console.log("Org saved.")})},a.createProj=function(){console.log("creating new project"),B.createProject({name:a.state.projName,description:a.state.projDescription,organization:[a.state.orgId]}).then(function(e){return console.log("Project saved.",e)}).catch(function(e){return console.log(e)}).then(function(){return a.getAllProj()})},a.updateProject=function(){var e=Object(j.a)(b.a.mark(function e(t,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update proj w/ ".concat(t," and this data:"),a),e.next=3,B.updateProject(t,a).then(function(e){return console.log("updateProject returned data: ",e.data),e}).catch(function(e){return console.log("error occurred!",e)});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getAllProj=function(){B.getProjects({}).then(function(e){var t=[],n=[],r=[],s=!0,o=!1,i=void 0;try{for(var l,c=e.data[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;u.organization===a.state.orgId&&(t.push(Object(g.a)({},u._id,u.name)),n.push(u.name),r.push(u.description))}}catch(m){o=!0,i=m}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}t.includes(void 0)?a.setState(Object(I.a)({},a.state,{projectList:[],projectNames:[],projectDesc:[],disableProjSelect:!0}),console.log("No relevant project. ",t,n,r)):a.setState(Object(I.a)({},a.state,{projectList:t,projectNames:n,projectDesc:r,disableProjSelect:!1}),console.log("Relevant projects found. Adding to state:",t,n,r))}).then(a.getAllVers()).catch(function(e){return console.log(e)})},a.createVer=function(){B.createVersion({name:a.state.verName,description:a.state.verDescription,project:[a.state.projId]}).catch(function(e){return console.log(e)})},a.updateVersion=function(){var e=Object(j.a)(b.a.mark(function e(t,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update version w/ ".concat(t," and this data:"),a),e.next=3,B.updateVersion(t,a).then(function(e){return console.log("updateVersion returned data: ",e.data),e}).catch(function(e){return console.log(e)});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getAllVers=function(){B.getVersions({}).then(function(e){var t=[],n=[],r=[],s=!0,o=!1,i=void 0;try{for(var l,c=e.data[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;u.project===a.state.projId&&(t.push(Object(g.a)({},u._id,u.name)),n.push(u.name),r.push(u.description))}}catch(m){o=!0,i=m}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}t.includes(void 0)?a.setState({versionList:[],versionNames:[],versionDesc:[],disableVerSelect:!0},console.log("No relevant version. ",t,n,r)):a.setState({versionList:t,versionNames:n,versionDesc:r,disableVerSelect:!1},console.log("Relevant versions found. Adding to state:",t,n,r))})},a.getOneVer=function(){B.findOneVersion(a.state.verId).then(function(e){return console.log("get one ver",e)})},a.getAllIssues=function(){B.getIssues({}).then(function(e){console.log("get all issues:",e);var t=[],n=[],r=[],s=[],o=[],i=[],l=[],c=[],u=[],m=[],d=[],p=[],h=[],f=[],v=[],b=[],j=[],I=!0,y=!1,E=void 0;try{for(var N,w=e.data[Symbol.iterator]();!(I=(N=w.next()).done);I=!0){var O=N.value;O.version===a.state.verId&&(console.log("pushing object to State issue arrays",O),t.push(O.reporter),n.push(O.owner),r.push(O.resolved),s.push(O.priority),o.push(O.targetResolutionDate),i.push(O.type),l.push(O.status),c.push(O.subject),u.push(O.description),m.push(O.potentialImpact),d.push(O.timing),p.push(O.url),h.push(O.imageURL),f.push(O.comments),v.push(O.reporterName),b.push(Object(g.a)({},O._id,O.subject)),console.log("issue object is now == ",b),j.push(O))}}catch(S){y=!0,E=S}finally{try{I||null==w.return||w.return()}finally{if(y)throw E}}b.includes(void 0)?a.setState({issueReporters:[],issueOwners:[],issueResolved:[],issuePriorities:[],issueTargetRes:[],issueTypes:[],issueStatus:[],issueList:[],issueNames:[],issueDesc:[],issueDates:[],issueURLs:[],issueImageURLs:[],issueCommentIds:[],issueImpacts:[],issueObjectList:[],issueReporterNames:[],disableIssueSelect:!0},console.log("No relevant issues.")):a.setState({issueReporters:t,issueOwners:n,issueResolved:r,issuePriorities:s,issueTargetRes:o,issueTypes:i,issueStatus:l,issueList:b,issueNames:c,issueDesc:u,issueDates:d,issueURLs:p,issueImageURLs:h,issueCommentIds:f,issueImpacts:m,issueObjectList:j,issueReporterNames:v,disableIssueSelect:!1},console.log("Relevant issues found. Adding to state."))})},a.updateIssue=Object(j.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.updateIssue(a.state.issue,{reporter:a.props.userId,type:a.state.issueType,timing:a.state.selectedDate,organization:a.state.orgId,project:a.state.projId,version:a.state.verId,subject:a.state.subject,description:a.state.description,url:a.state.url,status:a.state.status,resolved:a.state.resolved,owner:a.state.owner,priority:a.state.priority,targetResolutionDate:a.state.targetResolutionDate,potentialImpact:a.state.potentialImpact,imageURL:a.state.imageURL,partImpacted:a.state.partImpacted}).then(function(e){console.log("updateIssue has run.",e),a.createComment()});case 2:case"end":return e.stop()}},e)})),a.findCommenter=function(){var e=Object(j.a)(b.a.mark(function e(t){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.findUserById(t).then(function(e){return console.log("findCommenter returned :",e.data),e.data.displayName}).catch(function(e){return console.log(e)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.findCommenterNames=function(){},a.getAllComments=Object(j.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getComments({}).then(function(e){console.log("get all comments:",e);var t=[],n=[],r=[],s=[],o=[],i=[],l=[],c=[],u=[],m=[],d=[],p=[],h=[];Object(j.a)(b.a.mark(function f(){var v,j,I,y,E,N;return b.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:v=!0,j=!1,I=void 0,f.prev=3,y=e.data[Symbol.iterator]();case 5:if(v=(E=y.next()).done){f.next=26;break}if((N=E.value).issue!==a.state.issue){f.next=23;break}return t.push(N.organization),n.push(N.project),r.push(N.version),s.push(N.issue),f.next=14,o.push(N.commenter);case 14:console.log("commenterIds:",o),i.push(N.actionDescription),l.push(N.comment),c.push(N.visibility),u.push(N.avatar),m.push(N.timestamps),d.push(N),h.push(Object(g.a)({},N._id,N.subject)),p.push(N.commenterName);case 23:v=!0,f.next=5;break;case 26:f.next=32;break;case 28:f.prev=28,f.t0=f.catch(3),j=!0,I=f.t0;case 32:f.prev=32,f.prev=33,v||null==y.return||y.return();case 35:if(f.prev=35,!j){f.next=38;break}throw I;case 38:return f.finish(35);case 39:return f.finish(32);case 40:return console.log("commenterIds after:",o),f.next=43,console.log("commenterNames was filled!",p);case 43:if(d.reverse(),!h.includes(void 0)){f.next=49;break}return f.next=47,a.setState({commentOrgIds:[],commentprojIds:[],commentverIds:[],commentIssueIds:[],commentCommenterIds:[],commentActionsDescriptions:[],commentTexts:[],commentVisibilities:[],commentPhotoURLs:[],commentTimestamps:[],commentAuthors:[],commentfullObjects:[]},console.log("No relevant comments.",d));case 47:f.next=51;break;case 49:return f.next=51,a.setState({commentOrgIds:t,commentProjIds:n,commentVerIds:r,commentIssueIds:s,commentCommenterIds:o,commentActionsDescriptions:i,commentTexts:l,commentVisibilities:c,commentPhotoURLs:u,commentTimestamps:m,commentAuthors:p,commentFullObjects:d},function(){a.state.commentFullObjects.length>0?console.log("Relevant comments found and added to state:",d):console.log("No comments found.")});case 51:case"end":return f.stop()}},f,null,[[3,28,32,40],[33,,35,39]])}))()});case 2:case"end":return e.stop()}},e)})),a.createComment=Object(j.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.createComment({organization:a.state.orgId,project:a.state.projId,version:a.state.verId,issue:a.state.issue,commenter:a.props.userId,actionDescription:["Commented"],comment:a.state.comment,visibility:"Organization members and reporter",avatar:a.props.photoURL,timestamps:{updated_at:a.state.selectedDate},commenterName:a.props.userName,organizationName:a.state.orgName,projectName:a.state.projName,versionName:a.state.verName,issueSubject:a.state.subject}).then(function(e){console.log("createComment has run.",e),a.getAllComments()});case 2:case"end":return e.stop()}},e)})),a.updateComment=function(){var e=Object(j.a)(b.a.mark(function e(t,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update proj w/ ".concat(t," and this data:"),a),e.next=3,B.updateComment(t,a).then(function(e){return console.log("updateComment returned data: ",e.data),e}).catch(function(e){return console.log("error occurred!",e)});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.state={selectedDate:"-",userId:"",projId:"",projName:"",verId:"",verName:"",organizationList:[],organizationNames:[],organizationDesc:[],projectList:[],projectNames:[],projectDesc:[],versionList:[],versionNames:[],versionDesc:[],issueReporters:[],issueOwners:[],issueResolved:[],issuePriorities:[],issueTargetRes:[],issueTypes:[],issueStatus:[],issueList:[],issueNames:[],issueDesc:[],issueDates:[],issueURLs:[],issueImageURLs:[],issueCommentIds:[],issueImpacts:[],issueReporterNames:[],issueObjectList:[],disableProjSelect:!0,disableVerSelect:!0,disableIssueSelect:!0,issuePreState:{},issueStatusChoices:["Open","Investigating","Implementing","Escalated","Resolved","Closed"],issuePriorityChoices:["Critical","High","Medium","Low","Future"],issueAspects:["reporter","owner","resolved","priority","targetResolutionDate","type","status","subject","description","potentialImpact","timing","url","imageURL","organization","project","version","comments","reporterName"],reporter:"",owner:"",resolved:!1,priority:"",targetResolutionDate:"",type:"Technical",status:"",subject:"",description:"",potentialImpact:"",timing:"",url:"",imageURL:"",comment:"",reporterName:"",commentVisibilityChoices:["Organization members and reporter"],issue:"",commenter:"",actionDesc:[],visibility:"",image:"",createdAt:"",updatedAt:"",commenterName:a.props.userName,commentOrgIds:[],commentProjIds:[],commentVerIds:[],commentIssueIds:[],commentCommenterIds:[],commentActionsDescriptions:[],commentTexts:[],commentVisibilities:[],commentPhotoURLs:[],commentTimestamps:[],commentFullObjects:[],commentAuthors:[],commentOrgNames:[],commentProjNames:[],commentVerNames:[],commentIssueSubjects:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("component did mount :",this.state),this.getAllOrgs()}},{key:"componentDidUpdate",value:function(){console.log("component did update :",this.state)}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement($e.a,{className:t.topContainer},r.a.createElement("form",{className:t.containerOne,noValidate:!0,autoComplete:"off"},r.a.createElement("div",{className:t.grouping},r.a.createElement(x.a,{variant:"body2",className:t.textField},"Asterisk(*) denotes required fields.")),r.a.createElement(L.a,{className:t.divider}),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-org",required:!0},"Provider"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-org-ManageIssue",id:"demo-simple-select-outlined-ManageIssue",key:"demo-simple-select-outlined-ManageIssue",placeholder:"Provider Name",value:""!==this.state.orgId?this.state.orgId:"",onChange:this.handleOrgSelect},this.state.organizationNames?this.state.organizationNames.map(function(t,a){return r.a.createElement(k.a,{id:Object.keys(e.state.organizationList[a])[0],key:t,name:t,value:t},t)}):function(){return console.log("state during MenuItem render",e.state)})),r.a.createElement(S.a,{id:"orgId",disabled:!0,className:t.textField,label:"Provider ID",value:this.state.orgId,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"filled",onChange:this.handleFieldChange.bind(this)})),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-proj-ManageIssue",required:!0},"Project/Product"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-proj-ManageIssue",id:"demo-simple-select-outlined-proj-ManageIssue",key:"demo-simple-select-outlined-proj-ManageIssue",placeholder:"Project Name",onChange:this.handleProjSelect},this.state.projectNames?this.state.projectNames.map(function(t,a){return r.a.createElement(k.a,{id:t,key:"MI-proj-select-".concat(a),name:t,value:t,disabled:!!e.state.disableProjSelect},t)}):r.a.createElement("br",null))),r.a.createElement(S.a,{id:"projId",disabled:!0,label:"Project ID",className:t.textField,value:this.state.projId,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"filled",onChange:this.handleFieldChange.bind(this)})),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-ver",required:!0},"Version/Specification"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-ver",id:"demo-simple-select-outlined-ver",placeholder:"Version / Specification",onChange:this.handleVerSelect},this.state.versionNames?this.state.versionNames.map(function(t,a){return r.a.createElement(k.a,{id:t,key:Math.random(),name:t,value:t,disabled:!!e.state.disableVerSelect},t)}):r.a.createElement("br",null))),r.a.createElement(S.a,{id:"verId",disabled:!0,className:t.textField,label:"Version ID",value:this.state.verId,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},onChange:this.handleFieldChange.bind(this),variant:"filled"})),r.a.createElement(L.a,{className:t.divider}),r.a.createElement("div",{className:t.grouping},r.a.createElement(D.a,{variant:"outlined",className:t.formControl},r.a.createElement(P.a,{id:"demo-simple-select-outlined-label-issue",required:!0},"Issue"),r.a.createElement(C.a,{labelId:"demo-simple-select-outlined-label-issue",id:"demo-simple-select-outlined-issue",placeholder:"Issue",onChange:this.handleIssueSelect},this.state.issueNames?this.state.issueNames.map(function(t,a){return r.a.createElement(k.a,{id:t,key:Math.random(),name:t,value:t,disabled:!!e.state.disableIssueSelect},t)}):r.a.createElement("br",null))),r.a.createElement(S.a,{id:"issue",disabled:!0,label:"Issue ID",className:t.textField,value:this.state.issue,style:{margin:8},margin:"normal",InputLabelProps:{shrink:!0},variant:"filled"})),r.a.createElement("div",{className:t.grouping},r.a.createElement(S.a,{id:"subject",disabled:"Reporter"===this.props.userType,fullWidth:!0,multiline:!0,label:"Issue Subject",value:this.state.subject,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this),style:{margin:8}}),r.a.createElement(S.a,{id:"description",required:!0,multiline:!0,fullWidth:!0,rows:"4",key:"outlined-multiline-static",label:"Issue Description",value:this.state.description,style:{margin:8},margin:"normal",onChange:this.handleFieldChange.bind(this),InputLabelProps:{shrink:!0},variant:"outlined"}),r.a.createElement(S.a,{id:"type",disabled:!0,label:"Issue Type",defaultValue:this.state.type,className:t.textField,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(S.a,{id:"timing",disabled:!0,label:"Timing",value:this.state.selectedDate,className:t.textField,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this)}),r.a.createElement(S.a,{id:"url",fullWidth:!0,label:"URL",value:this.state.url,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this),style:{margin:8}}),r.a.createElement(S.a,{id:"comment",fullWidth:!0,multiline:!0,label:"Comment",placeholder:"Any thoughts?",value:this.state.comment,margin:"normal",variant:"outlined",onChange:this.handleFieldChange.bind(this),style:{margin:8}}),r.a.createElement("div",{className:"button-group"},r.a.createElement(E.a,{variant:"contained",color:"secondary",className:t.button,endIcon:r.a.createElement(O.a,null,"Reset Form"),onClick:function(){console.log("clicked reset while state is",e.state),e.clearState()}}," Reset Form"),r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.button,endIcon:r.a.createElement(N.a,null,"send"),onClick:function(){e.updateIssue()}}," Submit")))),r.a.createElement("div",{width:"1vw"},r.a.createElement(L.a,{orientation:"vertical"})),r.a.createElement("div",{className:t.containerTwo},this.state.commentAuthors.length>0?this.state.commentFullObjects.map(function(e,t){return r.a.createElement(Xe,{key:t,displayName:e.commenterName,photoURL:e.avatar,createdAt:e.timestamps.created_at,actionDesc:e.actionDescription[0],comment:e.comment})}):r.a.createElement(x.a,null,"(No Comments to Display.)")))}}]),t}(n.Component),Ze=Object(h.h)(Object(y.a)(function(e){return{topContainer:{display:"flex",flexWrap:"wrap",height:"100vh",alignItems:"flex-start"},containerOne:Object(I.a)({display:"flex",flexWrap:"wrap",alignItems:"center",padding:e.spacing(0,5)},e.mixins.toolbar,{paddingTop:"10vh",width:"55vw",height:"100%"}),containerTwo:{width:"35vw",paddingTop:"10vh",paddingLeft:"1vw",paddingRight:"1vw",backgroundColor:"#bbdefb",maxHeight:window.screen.availHeight,overflow:"auto",minHeight:window.screen.availHeight},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"40%"},content:{flexGrow:1,padding:e.spacing(3)},wrapper:{position:"relative"},button:{margin:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:"55%"},selectEmpty:{marginTop:e.spacing(2)},divider:{margin:"20px 0 20px 0"},toolbar:Object(I.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),grouping:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%"}}},{withTheme:!0})(Qe)),et=Object(Y.a)(function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3)}}}),tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).changeName=function(){a.setState({name:"Super Dan"}),alert("name changed!")},a.getUser=function(){B.findOneUser(a.props.email||a.state.email).then(function(e){console.log("getUser returned :",e.data),e.data?a.setState(Object(I.a)({},a.state,{id:e.data[0]._id}),a.getUserOrgs()):console.log("Email not found in DB!",e.data)}).catch(function(){return a.setState({message:"No results. Please try another query."})})},a.showDashboard=function(){a.setState({activeView:"Dashboard"},a.authenticate())},a.showSubmitIssue=function(){a.setState({activeView:"Submit Issue"})},a.showUserProfile=function(){a.setState({activeView:"User Profile"})},a.showOrganizationProfile=function(){a.setState({activeView:"Organization Profile"})},a.showProjectProfile=function(){a.setState({activeView:"Project Profile"})},a.showManageIssue=function(){a.setState({activeView:"Manage Issue"})},a.handldIssueChange=function(e){a.setState({value:e.target.value})},a.handleSubmitIssue=function(e,t){a.setState(Object(g.a)({},e,t))},a.determineView=function(e){},a.handleUserSave=function(e){B.createUser({})},a.checkNewUser=function(e){B.findOneUser(e||a.state.email).then(function(e){return""!==e?a.setState({id:e.data[0]._id},console.log("user found:",e.data)):function(){console.log("User NOT found",e.data),a.showUserProfile()}}).catch(function(){return a.setState({message:"No results. Please try another query."})})},a.authenticate=function(){le.a.auth().onAuthStateChanged(function(e){a.setState({isSignedIn:!!e,name:e.displayName,email:e.email,photoURL:e.photoURL,emailVerified:e.emailVerified,idToken:e.getIdToken()},function(){console.log("Authentication complete. Calling getUser..."),a.getUser()})})},a.getUserOrgs=function(){B.getOrgs().then(function(e){var t=[],n=[],r=!0,s=!1,o=void 0;try{for(var i,l=e.data[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;c.member.includes(a.state.id)&&(t.push(c._id),n.push(c.name))}}catch(u){s=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(s)throw o}}a.setState(Object(I.a)({},a.state,{affiliatedOrgIds:t.reverse(),affiliatedOrgNames:n.reverse()}),function(){return a.getAllProj()})})},a.getAllProj=function(){B.getProjects({}).then(function(e){var t=[],n=[],r=[],s=[],o=[];console.log("proj query:",e.data);var i=!0,l=!1,c=void 0;try{for(var u,m=e.data[Symbol.iterator]();!(i=(u=m.next()).done);i=!0){var d=u.value,p=!0,g=!1,h=void 0;try{for(var f,v=a.state.affiliatedOrgIds[Symbol.iterator]();!(p=(f=v.next()).done);p=!0){var b=f.value;console.log("obj shows:",d.organization),b===d.organization&&(s.push(d._id),o.push(d.name))}}catch(j){g=!0,h=j}finally{try{p||null==v.return||v.return()}finally{if(g)throw h}}}}catch(j){l=!0,c=j}finally{try{i||null==m.return||m.return()}finally{if(l)throw c}}t.includes(void 0)?a.setState(Object(I.a)({},a.state,{projectList:[],projectNames:[],projectDesc:[],affiliatedProjIds:[],affiliatedProjNames:[]}),console.log("No relevant project. ",t,n,r)):a.setState(Object(I.a)({},a.state,{projectList:t,projectNames:n,projectDesc:r,affiliatedProjIds:s.reverse(),affiliatedProjNames:o.reverse()}),function(){return a.getAllIssues()})}).catch(function(e){return console.log(e)})},a.getAllIssues=function(){B.getIssues({}).then(function(e){var t=[],n=[],r=!0,s=!1,o=void 0;try{for(var i,l=e.data[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;a.state.affiliatedOrgIds.includes(c.organization)&&(t.push(c._id),n.push(c.subject))}}catch(u){s=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(s)throw o}}[].includes(void 0)?a.setState({},console.log("No relevant issues.")):a.setState(Object(I.a)({},a.state,{relatedIssueIds:t.reverse(),relatedIssueNames:n.reverse()}),function(){console.log("Relevant issues found. Adding to state."),a.getAllComments()})})},a.getAllComments=Object(j.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getComments({}).then(function(e){console.log("get all comments:",e);var t=[],n=!0,r=!1,s=void 0;try{for(var o,i=e.data[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;a.state.affiliatedOrgIds.includes(l.organization)&&t.push(l)}}catch(c){r=!0,s=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}a.setState(Object(I.a)({},a.state,{relatedCommentObjects:t.reverse()}))});case 2:case"end":return e.stop()}},e)})),a.toggleTheme=function(){a.setState(function(e){return{}})},a.state={activeView:"Dashboard",isSignedIn:!1,id:"",email:"",name:"",userType:"Developer",type:"Technical",organization:"",project:"",subject:"",description:"",comment:[],owner:"",url:"",status:"",resolved:"",priority:"",targetResolutionDate:"",potentialImpact:"",image:"",partImpacted:"",affiliatedOrgIds:[],affiliatedProjIds:[],relatedIssueIds:[],affiliatedOrgNames:[],affiliatedProjNames:[],relatedIssueNames:[],relatedCommentObjects:[]},a.getUser=a.getUser.bind(Object(p.a)(Object(p.a)(a))),a.determineView=a.determineView.bind(Object(p.a)(Object(p.a)(a))),a.showSubmitIssue=a.showSubmitIssue.bind(Object(p.a)(Object(p.a)(a))),a.showDashboard=a.showDashboard.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmitIssue=a.handleSubmitIssue.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(e){this.authenticate(),console.log("Did Mount. State =",this.state)}},{key:"componentDidUpdate",value:function(){console.log("Did Update. State has :",this.state)}},{key:"render",value:function(){var e,t=this.state.activeView;return"Dashboard"===t?e=r.a.createElement(K,{orgCount:this.state.affiliatedOrgIds.length,projCount:this.state.affiliatedProjIds.length,issueCount:this.state.relatedIssueIds.length,commentObjects:this.state.relatedCommentObjects,orgNames:this.state.affiliatedOrgNames,projNames:this.state.affiliatedProjNames,issueSubjects:this.state.relatedIssueNames}):"Submit Issue"===t?e=r.a.createElement(G,{style:[et.content],name:this.state.name,email:this.state.email,type:this.state.type,userId:this.state.id,photoURL:this.state.photoURL,isSignedIn:this.state.isSignedIn,handleSubmitIssue:this.handleSubmitIssue,showDashboard:this.showDashboard}):"User Profile"===t?e=r.a.createElement(Be,{id:this.state.id,name:this.state.name,email:this.state.email,userType:this.state.userType,photoURL:this.state.photoURL,isSignedIn:this.state.isSignedIn,showDashboard:this.showDashboard}):"Organization Profile"===t?e=r.a.createElement(Ge,{id:this.state.id,name:this.state.name,email:this.state.email,userType:this.state.userType,isSignedIn:this.state.isSignedIn,showDashboard:this.showDashboard}):"Project Profile"===t?e=r.a.createElement(He,{id:this.state.id,isSignedIn:this.state.isSignedIn,showDashboard:this.showDashboard}):"Manage Issue"===t&&(e=r.a.createElement(Ze,{userId:this.state.id,userName:this.state.name,photoURL:this.state.photoURL,isSignedIn:this.state.isSignedIn,showDashboard:this.showDashboard})),r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(We,{activeView:this.state.activeView,name:this.state.name,userType:this.state.userType,changeName:this.changeName,determineView:this.determineView,showDashboard:this.showDashboard,showSubmitIssue:this.showSubmitIssue,showUserProfile:this.showUserProfile,showOrganizationProfile:this.showOrganizationProfile,showProjectProfile:this.showProjectProfile,showManageIssue:this.showManageIssue},e)))}}]),t}(n.Component),at=Object(y.a)(et)(tt),nt=Object(Y.a)(function(e){var t;return{main:{display:"flex",flexDirection:"column"},root:{flexGrow:1,flex:"1 0 100%"},hero:{height:"100%",flex:"0 0 auto",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.palette.background.paper,color:"light"===e.palette.type?e.palette.primary.dark:e.palette.primary.main},text:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},title:(t={textIndent:".7rem",fontWeight:e.typography.fontWeightBold},Object(g.a)(t,e.breakpoints.only("xs"),{fontSize:24,letterSpacing:".1em",textIndent:".1rem"}),Object(g.a)(t,"whiteSpace","nowrap"),t),h5:Object(g.a)({paddingLeft:4*e.spacing(1),paddingRight:4*e.spacing(1),marginTop:e.spacing(1),maxWidth:600,textAlign:"center"},e.breakpoints.only("xs"),{fontSize:18}),content:Object(g.a)({height:"100%"},e.breakpoints.up("sm"),{paddingTop:e.spacing(1)}),button:{marginTop:3*e.spacing(1),marginLeft:3*e.spacing(1),marginRight:3*e.spacing(1)},logo:{color:"secondary",margin:"".concat(3*e.spacing(1),"px 0 ").concat(4*e.spacing(1),"px"),width:"100%",height:"40vw",maxHeight:250},steps:{maxWidth:130*e.spacing(1),margin:"auto"},step:{padding:"".concat(3*e.spacing(1),"px ").concat(2*e.spacing(1),"px")},stepIcon:{marginBottom:e.spacing(1)},markdownElement:{},cardsContent:Object(g.a)({padding:15,display:"flex",justifyContent:"space-around",flexWrap:"wrap"},e.breakpoints.only("xs"),{width:"100%",padding:0,paddingTop:15}),card:Object(g.a)({minWidth:275,maxWidth:"50%",margin:15},e.breakpoints.only("xs"),{width:"100%",margin:0,marginTop:7}),bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},cardTitle:{marginBottom:16,fontSize:14},pos:{marginBottom:12}}}),rt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).ProtectedRoute=function(e){var t=e.children,a=Object(i.a)(e,["children"]);return r.a.createElement(h.b,Object.assign({},a,{render:t}))},e.AuthenticateButton=function(){var t=Object(h.g)();return e.authentication.isAuthenticated?r.a.createElement("p",null,"Welcome!"," ",r.a.createElement("button",{onClick:function(){e.authentication.signout(function(){return t.push("/")})}},"Sign out")):r.a.createElement("p",null,"You are not logged in.")},e.LandingPage=function(e){var t=e.history,a=(e.theme,nt());return Object(n.useEffect)(function(){(function(){try{var e=Object.keys(localStorage).find(function(e){return e.match(/persist:root/)}),t=JSON.parse(localStorage.getItem(e)),a=JSON.parse(t.auth);return a&&a.isAuthorised}catch(n){return!1}})()&&t.push("/signin")}),r.a.createElement("div",{className:a.main},r.a.createElement(X.a,{position:"static"},r.a.createElement(ne.a,{disableGutters:!0},r.a.createElement(x.a,{variant:"h6",className:a.title},"Project   Issue Manager"),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(re.a,{id:"tooltip-icon1",title:"Sign in"},r.a.createElement(ee.a,{name:"signin","aria-label":"Sign In",color:"inherit",onClick:function(){t.push("/signinpage")},rel:"noopener"},r.a.createElement(ae.a,null))),r.a.createElement(re.a,{id:"tooltip-icon2",title:"GitHub repository"},r.a.createElement(ee.a,{name:"github","aria-label":"Open Github",color:"inherit",href:"https://github.com/danninemx/project-issue-manager",target:"_blank",rel:"noopener"},r.a.createElement(Z.a,null))))),r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.hero},r.a.createElement("div",{className:a.content},r.a.createElement(oe.a,{alt:"Material-UI Logo",className:a.logo}),r.a.createElement("div",{className:a.text},r.a.createElement(x.a,{variant:"h3",align:"center",component:"h1",color:"inherit",gutterBottom:!0,className:a.title},"Project Issue Manager"),r.a.createElement(x.a,{variant:"h5",component:"h2",color:"inherit",gutterBottom:!0,className:a.h5},"For all bug control needs, from submission to resolution."),r.a.createElement("div",{className:a.buttonGroup},r.a.createElement(E.a,{onClick:function(){t.push("/submitissue")},className:a.button,variant:"outlined",color:"primary"},"Report an Issue"),r.a.createElement(E.a,{onClick:function(){t.push("/signinpage")},className:a.button,variant:"outlined",color:"primary"},"Log into Account"))),r.a.createElement("div",{className:a.cardsContent},r.a.createElement(_.a,{className:a.card},r.a.createElement(H.a,null,r.a.createElement(x.a,{variant:"h5",component:"h2"},"What is this app?"),r.a.createElement(x.a,{noWrap:!1,color:"textSecondary"},r.a.createElement("br",null),"This is an open source bug tracker system.",r.a.createElement("br",null),"It's free. Setup takes less than 5 minutes.",r.a.createElement("br",null),"Whether you are reporting or fixing a bug, we got you covered. ")),r.a.createElement($.a,null,r.a.createElement(E.a,{size:"small",onClick:function(){t.push("/signinpage")}},"Get started"))),r.a.createElement(_.a,{className:a.card},r.a.createElement(H.a,null,r.a.createElement(x.a,{variant:"h5",component:"h2"},"Want to test it out on desktop?"),r.a.createElement("br",null),r.a.createElement(x.a,null,"Paste this in Node command line:"),r.a.createElement("br",null),r.a.createElement(x.a,{className:a.pos,color:"textSecondary"}," ","git clone https://github.com/danninemx/project-issue-manager"," ",r.a.createElement("br",null)," ","npm i  #or yarn"," ",r.a.createElement("br",null)," ","npm start  #or yarn run start"," ")),r.a.createElement($.a,null,r.a.createElement(E.a,{size:"small",onClick:function(){window.open("https://github.com/danninemx/project-issue-manager","_blank").focus()}},"Learn More"))))))))},e.componentDidMount=function(){},e.componentDidUpdate=function(){},e.handler=e.handler.bind(Object(p.a)(Object(p.a)(e))),e.state={isAuthenticated:!1},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handler",value:function(){this.setState({isAuthenticated:!0}),alert("Welcome, user!")}},{key:"handleSignIn",value:function(){this.setState({isAuthenticated:!0}),alert("Welcome, user!")}},{key:"handleSignOut",value:function(){this.setState({isAuthenticated:!1})}},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:this.LandingPage}),r.a.createElement(h.b,{exact:!0,path:"/signinpage",handler:this.handler,component:pe}),r.a.createElement(h.b,{exact:!0,path:"/submitissue",component:G}),r.a.createElement(h.b,{exact:!0,path:"/dashboard",component:K}),r.a.createElement(h.b,{exact:!0,path:"/developerview"},r.a.createElement(at,null)))))}}]),t}(n.Component),st=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ot(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(rt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");st?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ot(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):ot(e)})}}()}},[[167,1,2]]]);
//# sourceMappingURL=main.ad2bfa0a.chunk.js.map